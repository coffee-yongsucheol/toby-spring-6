##### Depenency Inversion Principle

solid 라는 두 문자어를 조합하다 보니까 뒤에 나옴

원칙을 잘 지키는 코드가 될려면

의존 관계 주입 이라는 패턴(DI) 을 가지고 지키기 좋다.

1. 상위 수준의 모듈은 하위 수준의 모듈에 의존해서는 안된다. 둘 모두 추상화에 의존해야 한다.
2. 추상화는 구체적인 사항에 의존해서는 안된다. 구체적인 사항은 추상화에 의존해야 한다.

이게 무슨 소리를 하는 거지.. 그냥 읽으면 이해하기 힘들다.

이게 굉장히 중요한 객체지향 설계 원칙이다

##### 제일 중요한 모듈이 무엇인가?

둘다 추상화에 의존해야 한다.

소프트웨어 시스템을 작은 단위로 쪼개 놓은 것을 모듈이라고 한다.

응집도가 높고 결합도가 낮은 단위로 잘 쪼개 놓은 것들을 우리가 모듈이라고 한다.

프로젝트 안에 파일들 보면 jar로 끝나는 파일들이 바로 모듈이다.

자바에서는 패키지가 일종의 모듈을 구분하는 기준이 될 수 있다.

패키지로 잘 구분해 놓은 것들은 jar 같은 것들로 분리를 시킬 수가 있다.


![[Pasted image 20241212203006.png]]

Policy Layer : 정책과 비즈니스 로직을 담은 중요한

Mechanism Layer : 기술적인

이러한 의존관계로 이루어져 있었다

상위 모듈이 하위 모듈을 의존하는 관계가 만들어 진다.

하위 모듈이 변경되면 상위모듈도 따라서 변경이 되기 때문에

이러한 구조를 개선하기 위해서 여러 원칙들이 나왔다


- 모두 추상화에 의존해야 한다.

![[Pasted image 20241212203209.png]]

인터페이스를 구현한 방식으로 변경하고, 상위 수준의 모듈에 대해서 의존하도록 만들고

하위 수준의 모듈이 기술적 구현이 포함되도록 한다.


이러한 관계에 DI 까지 적용이 되면 지금까지 만든 코드가 만들어 진다

이 단계까지 모듈을 분리할 수 있도록 작성이 된다.


##### 모듈을 구분하는 법

모듈을 구분할때 패키지를 기준으로 나눈다




##### 현재 상황

의존성 원칙에 아직 1번 원칙을 어기고 있다.

스프링을 활용한 코드는 맞다. 하지만 의존성 역전 원칙 상태는 아니다

-> 인터페이스 소유권의 역전이 필요하다

의존성 역전 원칙에 되게 중요한 축이다.

Separated Interface 패턴

인터페이스는 어느 패키지에 들어있어야 되는가

자신이 사용되고 있는 쪽으로 역전 시키면 된다. -> Client

이걸 소유권의 역전이라고 한다.

![[Pasted image 20241212203940.png]]

**

인터페이스를 만들고

추상화를 하고 모든걸 추상화한 것에 의존하도록 만드는게 첫번째 작업

구현한 클래스 쪽에 두는게 아니라 사용하는 클라이언트 쪽으로 소유권을 역전 시키는 것이다.

-> 구현체들은 그대로 두고 인터페이스만 사용하는 클라이언트 패키지 쪽으로 옮기면 된다.


그래야만 상위모듈이 하위모듈을 의존하지 않는 코드가 된다.






