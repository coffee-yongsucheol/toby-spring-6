
PaymentService는 WedbApiExRateProvider에게 강하게 의존되어있다.

코드레벨의 의존관계는 하나의 코드가 변경되면 의존한 코드도 변경이 되어야 한다.


런타임에 의존해서 사용해야할 오브젝트를 관계 설정 책임이다.

그걸 설정하는 책임이 어디냐에 따라서 관계도 달라진다.

그 책임을 가진 코드가 사용할 클래스가 바뀌면 방법이 바뀌는거다

클래스가 바뀌더라도 PaymentService를 전혀 변경하지 않고

해결법 : 앞에 클래스 하나를 더 만들어 버리면 된다.

Client -> PaymentService -> ExRateProvider

-> WebApiExRateProvider

![[Pasted image 20241209202838.png]]

그걸 바꾸는 작업을 누가하냐 Client가 한다.

앞단으로 옮겨버리는거다


- 시간에 흐름에 따라서 코드가 어떻게 영향을 주고 바뀌게 되는가를 주의깊게 봐라



Client 에서 주입하는 Provider 만 다르면 완벽하게 동작 가능하게 되었다.


![[Pasted image 20241209203253.png]]

